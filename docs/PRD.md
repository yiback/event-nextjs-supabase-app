# 모임 이벤트 관리 웹 MVP PRD

## 🎯 핵심 정보

**목적**: 5-10명 소규모 모임(수영, 헬스, 친구 모임) 주최자가 이벤트 참석 관리와 공지를 효율적으로 처리할 수 있는 웹 서비스
**사용자**: 소규모 정기 모임을 운영하는 주최자 및 참여자

---

## 🚶 사용자 여정

### 주최자 플로우
```
1. 랜딩 페이지
   ↓ [로그인/회원가입 버튼]

2. 소셜 로그인 (카카오/구글)
   ↓ [인증 완료]

3. 대시보드
   ↓ [모임 생성 버튼]

4. 모임 생성 페이지
   ↓ [모임 정보 입력 + 저장]

5. 모임 상세 페이지
   ↓ [초대 코드 공유 + 이벤트 생성]

6. 이벤트 생성 페이지
   ↓ [이벤트 정보 입력 + 저장]

7. 이벤트 상세 페이지
   ↓ [참석 현황 실시간 확인]

8. 참석자 관리 → 공지사항 작성 → 웹 푸시 알림 발송
```

### 참여자 플로우
```
1. 초대 링크 클릭 (/invite/[code])
   ↓ [로그인 확인]

   [비로그인] → 소셜 로그인 → 모임 자동 가입
   [로그인] → 모임 자동 가입
   ↓

2. 모임 상세 페이지
   ↓ [이벤트 목록 확인]

3. 이벤트 상세 페이지
   ↓ [참석/불참/미정 선택]

4. 참석 응답 완료 → 알림 구독 → 리마인더 수신
```

---

## ⚡ 기능 명세

### 1. MVP 핵심 기능

| ID | 기능명 | 설명 | MVP 필수 이유 | 관련 페이지 |
|----|--------|------|-------------|------------|
| **F001** | 모임 생성 및 관리 | 모임 생성, 수정, 삭제 및 초대 코드 발급 | 서비스의 핵심 가치 - 모임 조직화 | 모임 생성 페이지, 모임 상세 페이지 |
| **F002** | 이벤트 생성 및 관리 | 이벤트 CRUD, 일시/장소/설명 관리 | 모임의 실제 활동 관리 핵심 | 이벤트 생성 페이지, 이벤트 상세 페이지 |
| **F003** | 참석 응답 시스템 | attending/not_attending/maybe 3가지 응답 | 참석 관리의 핵심 비즈니스 로직 | 이벤트 상세 페이지 |
| **F004** | 멤버 역할 관리 | owner/admin/member 3단계 권한 | 모임 운영의 체계적 관리 | 멤버 관리 페이지, 모임 상세 페이지 |
| **F005** | 공지사항 작성 | 모임/이벤트별 공지 작성 및 조회 | 효율적인 커뮤니케이션 도구 | 모임 상세 페이지, 이벤트 상세 페이지 |
| **F006** | 웹 푸시 알림 | 새 이벤트, 리마인더, 공지 실시간 알림 | 참여율 향상을 위한 필수 기능 | 모든 페이지 (백그라운드) |

### 2. MVP 필수 지원 기능

| ID | 기능명 | 설명 | MVP 필수 이유 | 관련 페이지 |
|----|--------|------|-------------|------------|
| **F010** | 소셜 로그인 | 카카오/구글 OAuth 인증 | 회원가입 장벽 최소화 | 로그인 페이지 |
| **F011** | 초대 코드 시스템 | 고유 코드로 모임 가입 | 간편한 모임 참여 방식 | 초대 링크 페이지, 모임 상세 페이지 |
| **F012** | 대시보드 | 가입 모임 목록 및 예정 이벤트 요약 | 사용자의 허브 역할 | 대시보드 |
| **F013** | 알림 구독 관리 | 푸시 알림 권한 요청 및 구독 설정 | 알림 기능의 기반 | 설정 페이지, 대시보드 |

### 3. MVP 이후 기능 (제외)

- 정산 기능 (회비 계산, 더치페이)
- 카풀 매칭 (차량 등록, 탑승자 매칭)
- 채팅 기능
- 이벤트 댓글/토론
- 모임 통계 대시보드
- 캘린더 연동 (Google Calendar, iCal)
- 파일/사진 공유

---

## 📱 메뉴 구조

```
📱 모임 이벤트 관리 웹 내비게이션

🏠 헤더 메뉴 (비로그인)
├── 🏠 홈
│   └── 기능: 랜딩 페이지
└── 🔐 로그인
    └── 기능: F010 (소셜 로그인)

👤 로그인 후 헤더 메뉴
├── 🏠 대시보드
│   └── 기능: F012 (내 모임 요약, 예정 이벤트)
├── 👥 모임
│   └── 기능: F001 (모임 목록 조회)
├── 📅 내 이벤트
│   └── 기능: F002 (전체 이벤트 캘린더 뷰)
├── 🔔 알림
│   └── 기능: F006 (알림 목록 조회)
└── ⚙️ 설정
    └── 기능: F013 (알림 설정, 프로필)

🏢 모임 관리 메뉴 (모임 상세 페이지 내)
├── 📋 모임 정보
│   └── 기능: F001 (모임 상세 정보, 초대 코드)
├── 👥 멤버 관리
│   └── 기능: F004 (멤버 목록, 역할 변경, 제거)
├── 📅 이벤트 목록
│   └── 기능: F002 (모임의 전체 이벤트)
├── 📢 공지사항
│   └── 기능: F005 (모임 공지 작성/조회)
└── ➕ 이벤트 생성
    └── 기능: F002 (새 이벤트 생성)

📅 이벤트 상세 메뉴
├── ℹ️ 이벤트 정보
│   └── 기능: F002 (일시, 장소, 설명)
├── ✅ 참석 응답
│   └── 기능: F003 (참석/불참/미정)
├── 👥 참석자 명단
│   └── 기능: F003 (참석자 실시간 현황)
└── 📢 이벤트 공지
    └── 기능: F005 (이벤트 관련 공지)

🔧 공통 기능 (모든 로그인 사용자)
├── 🔔 푸시 알림 수신
│   └── 기능: F006 (백그라운드 알림)
└── 🔗 초대 링크 접속
    └── 기능: F011 (초대 코드로 모임 가입)
```

---

## 📄 페이지별 상세 기능

### 랜딩 페이지 (/)

> **구현 기능:** 없음 | **인증:** 불필요

| 항목 | 내용 |
|------|------|
| **역할** | 서비스 소개 및 로그인 유도 |
| **진입 경로** | URL 직접 접속 또는 로그아웃 후 자동 리디렉션 |
| **사용자 행동** | 서비스 소개 확인 후 로그인 버튼 클릭 |
| **주요 기능** | • 서비스 핵심 가치 소개<br>• 주요 기능 프리뷰<br>• **로그인/회원가입** 버튼 (카카오/구글) |
| **다음 이동** | 로그인 성공 → 대시보드 |

---

### 소셜 로그인 페이지 (/auth/login)

> **구현 기능:** `F010` | **인증:** 불필요

| 항목 | 내용 |
|------|------|
| **역할** | OAuth 소셜 로그인 전용 페이지 |
| **진입 경로** | 랜딩 페이지 "로그인" 버튼 또는 초대 링크 접속 시 자동 리디렉션 |
| **사용자 행동** | 카카오 또는 구글 로그인 버튼 클릭 |
| **주요 기능** | • 카카오 OAuth 인증<br>• 구글 OAuth 인증<br>• Supabase Auth 처리<br>• 자동 프로필 생성 |
| **다음 이동** | 성공 → 대시보드 또는 초대 링크 원래 목적지 |

---

### 대시보드 (/dashboard)

> **구현 기능:** `F012`, `F006` | **인증:** 필수

| 항목 | 내용 |
|------|------|
| **역할** | 사용자의 메인 허브 - 모임 및 이벤트 요약 |
| **진입 경로** | 로그인 성공 후 기본 랜딩 또는 헤더 "대시보드" 클릭 |
| **사용자 행동** | 가입한 모임 목록 확인, 예정된 이벤트 확인, 새 모임 생성 |
| **주요 기능** | • 내가 속한 모임 카드 목록 (최대 10개)<br>• 예정된 이벤트 타임라인 (7일 이내)<br>• 참석 응답 필요한 이벤트 강조 표시<br>• **모임 생성** 버튼<br>• 푸시 알림 권한 요청 프롬프트 |
| **다음 이동** | 모임 카드 클릭 → 모임 상세, 이벤트 클릭 → 이벤트 상세 |

---

### 모임 목록 페이지 (/groups)

> **구현 기능:** `F001` | **인증:** 필수

| 항목 | 내용 |
|------|------|
| **역할** | 전체 모임 목록 조회 및 모임 생성 진입점 |
| **진입 경로** | 헤더 "모임" 메뉴 클릭 |
| **사용자 행동** | 모임 목록 스크롤, 특정 모임 선택, 새 모임 생성 |
| **주요 기능** | • 내가 속한 모임 그리드/리스트 뷰<br>• 모임별 역할 표시 (owner/admin/member)<br>• 모임별 예정 이벤트 개수 표시<br>• **새 모임 만들기** 버튼 |
| **다음 이동** | 모임 선택 → 모임 상세, 새 모임 만들기 → 모임 생성 페이지 |

---

### 모임 생성 페이지 (/groups/new)

> **구현 기능:** `F001` | **인증:** 필수

| 항목 | 내용 |
|------|------|
| **역할** | 새로운 모임 그룹 생성 |
| **진입 경로** | 대시보드 또는 모임 목록에서 "모임 생성" 버튼 클릭 |
| **사용자 행동** | 모임 정보 입력 및 저장 |
| **주요 기능** | • 모임 이름 입력 (필수, 50자 제한)<br>• 모임 설명 입력 (선택, 500자 제한)<br>• 자동 초대 코드 생성<br>• 생성자 자동 owner 권한 부여<br>• **모임 생성** 버튼 |
| **다음 이동** | 생성 성공 → 모임 상세 페이지, 실패 → 에러 메시지 표시 |

---

### 모임 상세 페이지 (/groups/[groupId])

> **구현 기능:** `F001`, `F002`, `F004`, `F005`, `F011` | **인증:** 필수 + 멤버 권한

| 항목 | 내용 |
|------|------|
| **역할** | 모임의 중심 허브 - 이벤트, 멤버, 공지 통합 관리 |
| **진입 경로** | 대시보드 또는 모임 목록에서 모임 선택 |
| **사용자 행동** | 이벤트 목록 확인, 멤버 확인, 공지 읽기, 초대 코드 공유 |
| **주요 기능** | • 모임 정보 표시 (이름, 설명)<br>• 초대 코드 복사 버튼<br>• 예정 이벤트 목록 (최신 5개)<br>• 멤버 수 및 역할 표시<br>• 공지사항 최신 3개<br>• **이벤트 생성** 버튼 (admin 이상)<br>• **멤버 관리** 버튼 (admin 이상)<br>• **모임 설정** 버튼 (owner) |
| **다음 이동** | 이벤트 클릭 → 이벤트 상세, 멤버 관리 → 멤버 관리 페이지 |

---

### 멤버 관리 페이지 (/groups/[groupId]/members)

> **구현 기능:** `F004` | **인증:** 필수 + admin 이상 권한

| 항목 | 내용 |
|------|------|
| **역할** | 모임 멤버 목록 조회 및 역할 변경 |
| **진입 경로** | 모임 상세에서 "멤버 관리" 버튼 클릭 |
| **사용자 행동** | 멤버 목록 확인, 역할 변경, 멤버 제거 |
| **주요 기능** | • 전체 멤버 리스트 (프로필 이미지, 이름, 역할)<br>• 역할 변경 드롭다운 (owner는 변경 불가)<br>• 멤버 제거 버튼 (owner 제외)<br>• 참여 날짜 표시<br>• **변경사항 저장** 버튼 |
| **다음 이동** | 저장 성공 → 모임 상세, 뒤로가기 → 모임 상세 |

---

### 이벤트 생성 페이지 (/groups/[groupId]/events/new)

> **구현 기능:** `F002` | **인증:** 필수 + admin 이상 권한

| 항목 | 내용 |
|------|------|
| **역할** | 새로운 이벤트 생성 |
| **진입 경로** | 모임 상세에서 "이벤트 생성" 버튼 클릭 |
| **사용자 행동** | 이벤트 상세 정보 입력 및 저장 |
| **주요 기능** | • 이벤트 제목 입력 (필수, 100자 제한)<br>• 일시 선택 (날짜 + 시간 picker)<br>• 장소 입력 (선택, 200자 제한)<br>• 상세 설명 입력 (선택, 1000자 제한)<br>• 자동 알림 발송 옵션 체크박스<br>• **이벤트 생성** 버튼 |
| **다음 이동** | 생성 성공 → 이벤트 상세, 알림 발송 → 모든 멤버에게 푸시 알림 |

---

### 이벤트 상세 페이지 (/groups/[groupId]/events/[eventId])

> **구현 기능:** `F002`, `F003`, `F005`, `F006` | **인증:** 필수 + 멤버 권한

| 항목 | 내용 |
|------|------|
| **역할** | 이벤트 정보 조회 및 참석 응답 |
| **진입 경로** | 대시보드, 모임 상세, 내 이벤트 목록에서 이벤트 선택 |
| **사용자 행동** | 이벤트 상세 확인, 참석 여부 응답, 참석자 명단 확인 |
| **주요 기능** | • 이벤트 제목, 일시, 장소, 설명 표시<br>• 참석 응답 버튼 3개 (참석/불참/미정)<br>• 실시간 참석자 명단 (프로필, 이름, 응답 상태)<br>• 참석률 프로그레스 바<br>• 이벤트 공지사항 섹션<br>• **이벤트 수정** 버튼 (admin 이상)<br>• **공지 작성** 버튼 (admin 이상) |
| **다음 이동** | 참석 응답 → 페이지 유지 (실시간 업데이트), 뒤로가기 → 모임 상세 |

---

### 내 이벤트 전체 페이지 (/events)

> **구현 기능:** `F002`, `F003` | **인증:** 필수

| 항목 | 내용 |
|------|------|
| **역할** | 모든 모임의 이벤트 통합 캘린더 뷰 |
| **진입 경로** | 헤더 "내 이벤트" 메뉴 클릭 |
| **사용자 행동** | 월별 캘린더에서 이벤트 확인, 특정 이벤트 선택 |
| **주요 기능** | • 월별 캘린더 뷰<br>• 날짜별 이벤트 마커 (모임별 색상 구분)<br>• 이벤트 클릭 시 간단한 팝업 정보<br>• 참석 응답 여부 아이콘 표시<br>• 리스트 뷰 토글 옵션 |
| **다음 이동** | 이벤트 클릭 → 이벤트 상세 |

---

### 초대 링크 페이지 (/invite/[code])

> **구현 기능:** `F011` | **인증:** 선택적

| 항목 | 내용 |
|------|------|
| **역할** | 초대 코드로 모임 자동 가입 |
| **진입 경로** | 외부 공유된 초대 링크 클릭 |
| **사용자 행동** | 로그인 후 모임 자동 가입 |
| **주요 기능** | • 초대 코드 유효성 검증<br>• 모임 정보 미리보기 (이름, 멤버 수)<br>• 비로그인 시 로그인 페이지로 리디렉션 (원래 URL 유지)<br>• 로그인 후 자동 모임 가입<br>• 이미 가입한 경우 모임 상세로 이동 |
| **다음 이동** | 가입 성공 → 모임 상세, 실패 → 에러 페이지 |

---

### 알림 페이지 (/notifications)

> **구현 기능:** `F006` | **인증:** 필수

| 항목 | 내용 |
|------|------|
| **역할** | 받은 알림 목록 조회 |
| **진입 경로** | 헤더 "알림" 아이콘 클릭 |
| **사용자 행동** | 알림 목록 스크롤, 특정 알림 클릭하여 이동 |
| **주요 기능** | • 알림 목록 (최신순 정렬)<br>• 알림 타입별 아이콘 (이벤트/공지/리마인더)<br>• 읽음/안읽음 상태 표시<br>• 알림 클릭 시 해당 페이지로 이동<br>• 전체 읽음 처리 버튼 |
| **다음 이동** | 알림 클릭 → 연결된 이벤트/모임 상세 페이지 |

---

### 설정 페이지 (/settings)

> **구현 기능:** `F013` | **인증:** 필수

| 항목 | 내용 |
|------|------|
| **역할** | 알림 설정 및 프로필 관리 |
| **진입 경로** | 헤더 "설정" 메뉴 클릭 |
| **사용자 행동** | 알림 권한 설정, 프로필 정보 확인 |
| **주요 기능** | • 푸시 알림 권한 활성화/비활성화<br>• 알림 타입별 설정 (새 이벤트, 리마인더, 공지)<br>• 프로필 이름 및 이메일 표시<br>• 로그아웃 버튼 |
| **다음 이동** | 로그아웃 → 랜딩 페이지 |

---

## 🗄️ 데이터 모델

### profiles (사용자 프로필)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID (Supabase Auth 연동) |
| email | 이메일 주소 | String |
| full_name | 사용자 이름 | String |
| avatar_url | 프로필 이미지 URL | String (nullable) |
| created_at | 가입 일시 | Timestamp |

### groups (모임 그룹)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| name | 모임 이름 | String |
| description | 모임 설명 | Text (nullable) |
| image_url | 모임 대표 이미지 | String (nullable) |
| invite_code | 초대 코드 | String (unique, 8자 랜덤) |
| invite_code_expires_at | 초대 코드 만료일 | Timestamp (nullable) |
| owner_id | 모임 소유자 | → profiles.id |
| created_at | 생성 일시 | Timestamp |

### group_members (그룹 멤버)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| group_id | 모임 ID | → groups.id |
| user_id | 사용자 ID | → profiles.id |
| role | 역할 | Enum (owner, admin, member) |
| joined_at | 가입 일시 | Timestamp |

### events (이벤트)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| group_id | 모임 ID | → groups.id |
| title | 이벤트 제목 | String |
| description | 상세 설명 | Text (nullable) |
| event_date | 이벤트 일시 | Timestamp |
| location | 장소 | String (nullable) |
| response_deadline | 응답 마감일 | Timestamp (nullable) |
| status | 이벤트 상태 | Enum (scheduled, ongoing, completed, cancelled) |
| max_participants | 최대 참석자 수 | Integer (nullable) |
| cost | 참가비 | Integer (default: 0) |
| created_by | 생성자 ID | → profiles.id |
| created_at | 생성 일시 | Timestamp |

### participants (이벤트 참여자)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| event_id | 이벤트 ID | → events.id |
| user_id | 사용자 ID | → profiles.id |
| status | 참석 상태 | Enum (attending, not_attending, maybe) |
| responded_at | 응답 일시 | Timestamp |

**제약조건**: UNIQUE(event_id, user_id) - 중복 응답 방지

### announcements (공지사항)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| group_id | 모임 ID | → groups.id (nullable) |
| event_id | 이벤트 ID | → events.id (nullable) |
| title | 공지 제목 | String |
| content | 공지 내용 | Text |
| author_id | 작성자 ID | → profiles.id |
| created_at | 작성 일시 | Timestamp |

### push_subscriptions (푸시 알림 구독)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| user_id | 사용자 ID | → profiles.id |
| endpoint | 푸시 엔드포인트 | String (unique) |
| p256dh | 암호화 키 | String |
| auth | 인증 시크릿 | String |
| created_at | 구독 일시 | Timestamp |

### notification_logs (알림 발송 로그)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| user_id | 수신자 ID | → profiles.id |
| type | 알림 타입 | Enum (new_event, reminder, announcement) |
| title | 알림 제목 | String |
| message | 알림 내용 | Text |
| related_event_id | 관련 이벤트 ID | → events.id (nullable) |
| sent_at | 발송 일시 | Timestamp |
| read_at | 읽음 일시 | Timestamp (nullable) |

### event_images (이벤트 이미지)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| event_id | 이벤트 ID | → events.id |
| image_url | 이미지 URL | String |
| display_order | 표시 순서 | Integer (default: 0) |
| created_at | 생성 일시 | Timestamp |

### user_event_settings (사용자 이벤트 설정)
| 필드 | 설명 | 타입/관계 |
|------|------|----------|
| id | 고유 식별자 | UUID |
| user_id | 사용자 ID | → profiles.id |
| event_id | 이벤트 ID | → events.id |
| is_favorite | 즐겨찾기 여부 | Boolean (default: false) |
| notification_enabled | 알림 활성화 | Boolean (default: true) |
| created_at | 생성 일시 | Timestamp |

**제약조건**: UNIQUE(user_id, event_id)

### ERD (Entity Relationship Diagram)

```
┌──────────────┐
│   profiles   │
│──────────────│
│ id (PK)      │───────────────────────────────────────────────────────┐
│ email        │                                                        │
│ full_name    │                                                        │
│ avatar_url   │                                                        │
│ created_at   │                                                        │
└──────────────┘                                                        │
       │                                                                │
       │ 1:N                                                            │
       ▼                                                                │
┌──────────────────┐                                                    │
│  push_subscriptions │◄───────────────────────────────────────────────┤
│──────────────────│                                                    │
│ id (PK)          │                                                    │
│ user_id (FK)     │                                                    │
│ endpoint         │                                                    │
│ p256dh           │                                                    │
│ auth             │                                                    │
│ created_at       │                                                    │
└──────────────────┘                                                    │
                                                                        │
┌──────────────┐        ┌──────────────────┐        ┌──────────────┐   │
│   profiles   │◄──────▶│  group_members   │◄──────▶│    groups    │   │
└──────────────┘        │──────────────────│        │──────────────│   │
                        │ id (PK)          │        │ id (PK)      │   │
                        │ group_id (FK)    │        │ name         │   │
                        │ user_id (FK)     │        │ description  │   │
                        │ role             │        │ image_url    │   │
                        │ joined_at        │        │ invite_code  │   │
                        └──────────────────┘        │ invite_code_expires_at │
                                                    │ owner_id (FK)│◄──┤
                                                    │ created_at   │   │
                                                    └──────────────┘   │
                                                           │           │
                                                           │ 1:N       │
                                                           ▼           │
                        ┌──────────────────┐        ┌──────────────┐   │
                        │  announcements   │◄───────│    events    │   │
                        │──────────────────│        │──────────────│   │
                        │ id (PK)          │        │ id (PK)      │   │
                        │ group_id (FK)    │        │ group_id (FK)│   │
                        │ event_id (FK)    │        │ title        │   │
                        │ title            │        │ description  │   │
                        │ content          │        │ event_date   │   │
                        │ author_id (FK)   │◄───────│ location     │   │
                        │ created_at       │        │ response_deadline │
                        └──────────────────┘        │ status       │   │
                                                    │ max_participants │
                                                    │ cost         │   │
                                                    │ created_by (FK)│◄┤
                                                    │ created_at   │   │
                                                    └──────────────┘   │
                                                           │           │
                              ┌─────────────────┬──────────┼───────────┤
                              │                 │          │           │
                              ▼                 ▼          ▼           │
                    ┌──────────────────┐ ┌──────────────┐ ┌────────────────────┐
                    │  event_images    │ │ participants │ │ user_event_settings│
                    │──────────────────│ │──────────────│ │────────────────────│
                    │ id (PK)          │ │ id (PK)      │ │ id (PK)            │
                    │ event_id (FK)    │ │ event_id (FK)│ │ user_id (FK)       │◄─┤
                    │ image_url        │ │ user_id (FK) │◄│ event_id (FK)      │  │
                    │ display_order    │ │ status       │ │ is_favorite        │  │
                    │ created_at       │ │ responded_at │ │ notification_enabled│  │
                    └──────────────────┘ └──────────────┘ │ created_at         │  │
                                                          └────────────────────┘  │
                                                                                   │
┌──────────────────────┐                                                           │
│  notification_logs   │◄──────────────────────────────────────────────────────────┘
│──────────────────────│
│ id (PK)              │
│ user_id (FK)         │
│ type                 │
│ title                │
│ message              │
│ related_event_id (FK)│
│ sent_at              │
│ read_at              │
└──────────────────────┘
```

**관계 요약:**
- `profiles` 1:N `group_members` N:1 `groups` (다대다 관계)
- `groups` 1:N `events`
- `groups` 1:N `announcements`
- `events` 1:N `participants`
- `events` 1:N `event_images`
- `events` 1:N `user_event_settings`
- `events` 1:N `announcements`
- `profiles` 1:N `push_subscriptions`
- `profiles` 1:N `notification_logs`

---

## 🛠️ 기술 스택 (최신 버전)

### 🎨 프론트엔드 프레임워크
- **Next.js 15** (App Router) - React 풀스택 프레임워크
- **TypeScript 5.6+** - 타입 안전성 보장
- **React 19** - UI 라이브러리 (최신 동시성 기능)

### 🎨 스타일링 & UI
- **TailwindCSS v3.4** - 유틸리티 CSS 프레임워크
- **shadcn/ui** - 고품질 React 컴포넌트 라이브러리
- **Lucide React** - 아이콘 라이브러리
- **Radix UI** - 접근성 높은 Headless UI 컴포넌트 (shadcn/ui 기반)

### 📝 폼 & 검증
- **React Hook Form 7.x** - 폼 상태 관리
- **Zod** - 스키마 검증 라이브러리

### 🗄️ 백엔드 & 데이터베이스
- **Supabase** - BaaS (인증, 데이터베이스, 실시간 구독, Edge Functions)
- **PostgreSQL** - 관계형 데이터베이스 (Supabase 포함)
- **Supabase Auth** - 소셜 로그인 (카카오, 구글 OAuth)

### 🔔 푸시 알림
- **Web Push API** - 브라우저 네이티브 푸시 알림
- **Supabase Edge Functions** - 서버리스 알림 발송 로직

### 🚀 배포 & 호스팅
- **Vercel** - Next.js 15 최적화 배포 플랫폼

### 📦 패키지 관리
- **npm** - 의존성 관리

---

## 🔔 웹 푸시 알림 구현 상세

### Service Worker 설정
| 항목 | 내용 |
|------|------|
| 파일 위치 | `public/sw.js` |
| 등록 시점 | 앱 초기화 시 자동 등록 |
| 핸들링 이벤트 | `push`, `notificationclick` |

### VAPID 키 관리
| 항목 | 내용 |
|------|------|
| Public Key 환경변수 | `NEXT_PUBLIC_VAPID_PUBLIC_KEY` |
| Private Key 환경변수 | `VAPID_PRIVATE_KEY` |
| 키 생성 명령어 | `npx web-push generate-vapid-keys` |

### 알림 발송 흐름
```
1. 클라이언트 → 푸시 구독 등록 → push_subscriptions 테이블 저장
2. 이벤트 생성/공지 작성 시 → Supabase Edge Function 호출
3. Edge Function → 해당 그룹 멤버 구독 정보 조회 → 푸시 발송
4. 발송 결과 → notification_logs 테이블 기록
```

### 알림 타입별 트리거
| 알림 타입 | 트리거 시점 | 대상 |
|----------|------------|------|
| `new_event` | 새 이벤트 생성 시 | 해당 그룹 전체 멤버 |
| `reminder` | 이벤트 하루 전 | 미응답 멤버 |
| `announcement` | 공지사항 작성 시 | 해당 그룹/이벤트 멤버 |

### iOS 지원 사항
- iOS 16.4+ Safari에서만 웹 푸시 지원
- 미지원 기기: 인앱 알림 배너로 대체
- PWA 설치 시에만 푸시 알림 정상 동작

---

## 📷 이미지 업로드 명세

### Supabase Storage 버킷 설정
| 버킷명 | 용도 | 공개 여부 | 최대 크기 |
|--------|------|----------|----------|
| `group-images` | 모임 대표 이미지 | Public | 5MB |
| `event-images` | 이벤트 이미지 (슬라이더) | Public | 5MB |
| `avatars` | 사용자 프로필 이미지 | Public | 2MB |

### 파일 제한
| 항목 | 제한 |
|------|------|
| 허용 타입 | `image/jpeg`, `image/png`, `image/webp` |
| 최대 크기 | 5MB (프로필은 2MB) |
| 이미지 최적화 | 클라이언트 리사이징 (1200px max width) |
| 이벤트당 최대 이미지 | 5장 |

### 업로드 흐름
```
1. 클라이언트에서 이미지 선택
2. 클라이언트 리사이징 (1200px max width, 품질 80%)
3. Supabase Storage 직접 업로드 (Signed URL 사용)
4. 업로드 완료 → Public URL 반환
5. 해당 테이블(groups.image_url / event_images)에 URL 저장
```

### Storage RLS 정책
| 작업 | 정책 |
|------|------|
| Upload | 인증된 사용자만 |
| Read | Public (모든 사용자) |
| Delete | 본인 업로드 파일 또는 admin 이상 |

---

## ✅ 정합성 검증 체크리스트

### 🔍 1단계: 기능 명세 → 페이지 연결 검증
- [x] F001 (모임 관리) → 모임 생성 페이지, 모임 상세 페이지, 모임 목록 페이지
- [x] F002 (이벤트 관리) → 이벤트 생성 페이지, 이벤트 상세 페이지, 내 이벤트 전체 페이지
- [x] F003 (참석 응답) → 이벤트 상세 페이지, 내 이벤트 전체 페이지
- [x] F004 (멤버 역할 관리) → 멤버 관리 페이지, 모임 상세 페이지
- [x] F005 (공지사항) → 모임 상세 페이지, 이벤트 상세 페이지
- [x] F006 (웹 푸시 알림) → 모든 페이지 (백그라운드), 알림 페이지
- [x] F010 (소셜 로그인) → 로그인 페이지
- [x] F011 (초대 코드) → 초대 링크 페이지, 모임 상세 페이지
- [x] F012 (대시보드) → 대시보드
- [x] F013 (알림 구독 관리) → 설정 페이지

### 🔍 2단계: 메뉴 구조 → 페이지 연결 검증
- [x] 홈 → 랜딩 페이지 ✓
- [x] 로그인 → 로그인 페이지 (F010) ✓
- [x] 대시보드 → 대시보드 (F012) ✓
- [x] 모임 → 모임 목록 페이지 (F001) ✓
- [x] 내 이벤트 → 내 이벤트 전체 페이지 (F002) ✓
- [x] 알림 → 알림 페이지 (F006) ✓
- [x] 설정 → 설정 페이지 (F013) ✓

### 🔍 3단계: 페이지별 상세 기능 → 역참조 검증
- [x] 모든 페이지의 구현 기능 ID가 기능 명세에 정의됨
- [x] 모든 페이지가 메뉴 구조 또는 사용자 여정에서 접근 가능

### 🔍 4단계: 누락 및 고아 항목 검증
- [x] 기능 명세에만 있고 페이지에서 구현되지 않은 기능: **없음**
- [x] 페이지에만 있고 기능 명세에 정의되지 않은 기능: **없음**
- [x] 메뉴에만 있고 실제 페이지가 없는 항목: **없음**

**✅ 정합성 검증 완료 - 모든 항목이 일관되게 연결되어 있습니다.**

---

## 🎨 UI/UX 디자인 가이드라인

### 컬러 시스템 (파란색 계열)

| 용도 | 색상 코드 | Tailwind 클래스 | 사용 예시 |
|------|-----------|-----------------|----------|
| Primary | #3B82F6 | `blue-500` | 주요 버튼, 활성 탭, 강조 링크 |
| Primary Hover | #2563EB | `blue-600` | 버튼 호버 상태 |
| Primary Light | #DBEAFE | `blue-100` | 선택된 카드 배경, 알림 배지 배경 |
| Success | #10B981 | `emerald-500` | 참석 상태, 성공 메시지 |
| Warning | #F59E0B | `amber-500` | 미정 상태, 마감 임박 표시 |
| Error | #EF4444 | `red-500` | 불참 상태, 에러 메시지, 오늘 마감 |
| Background | #F9FAFB | `gray-50` | 페이지 배경 |
| Card Background | #FFFFFF | `white` | 카드, 모달 배경 |
| Text Primary | #111827 | `gray-900` | 제목, 주요 텍스트 |
| Text Secondary | #6B7280 | `gray-500` | 보조 텍스트, 플레이스홀더 |
| Border | #E5E7EB | `gray-200` | 카드 테두리, 구분선 |

### 반응형 브레이크포인트

| 디바이스 | 너비 범위 | 레이아웃 특징 |
|----------|-----------|---------------|
| **Mobile** | < 768px | 하단 네비게이션, 단일 컬럼 레이아웃 |
| **Tablet** | 768px ~ 1024px | 상단 헤더, 2컬럼 그리드 |
| **Desktop** | > 1024px | 상단 헤더 + 사이드바, 3컬럼 그리드 |

### 타이포그래피

| 요소 | 크기 | 굵기 | 클래스 |
|------|------|------|--------|
| Page Title | 24px | Bold | `text-2xl font-bold` |
| Section Title | 18px | Semibold | `text-lg font-semibold` |
| Card Title | 16px | Medium | `text-base font-medium` |
| Body Text | 14px | Normal | `text-sm` |
| Caption | 12px | Normal | `text-xs text-gray-500` |

### 간격 시스템

| 요소 | 간격 | 클래스 |
|------|------|--------|
| 페이지 패딩 (모바일) | 16px | `p-4` |
| 페이지 패딩 (데스크톱) | 24px | `p-6` |
| 카드 내부 패딩 | 16px | `p-4` |
| 컴포넌트 간 간격 | 16px | `gap-4` |
| 요소 간 간격 | 8px | `gap-2` |

---

## 🧩 핵심 컴포넌트 명세

### 1. Header (데스크톱)

```
┌────────────────────────────────────────────────────────────────────────────┐
│  🎉 Logo  │  모임선택 ▼  │                        │  🔍  │  🔔(3)  │  👤 ▼ │
└────────────────────────────────────────────────────────────────────────────┘
```

| 요소 | 설명 | 동작 |
|------|------|------|
| Logo | 서비스 로고 | 클릭 시 대시보드로 이동 |
| 모임 선택 드롭다운 | 가입한 모임 목록 | 선택 시 해당 모임 상세로 이동 |
| 검색 아이콘 | 이벤트/모임 검색 | 클릭 시 검색 모달 오픈 |
| 알림 아이콘 | 읽지 않은 알림 개수 뱃지 | 클릭 시 알림 페이지로 이동 |
| 프로필 드롭다운 | 사용자 메뉴 | 설정, 로그아웃 옵션 |

### 2. BottomNavigation (모바일)

```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│     홈      │    내모임    │    이벤트    │   마이페이지  │
│     🏠      │     👥      │     📅      │      👤      │
│   (활성)    │             │             │              │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

| 탭 | 경로 | 아이콘 | 활성 상태 |
|-----|------|--------|----------|
| 홈 | `/dashboard` | Home | Primary 색상 + 채워진 아이콘 |
| 내모임 | `/groups` | Users | Primary 색상 + 채워진 아이콘 |
| 이벤트 | `/events` | Calendar | Primary 색상 + 채워진 아이콘 |
| 마이페이지 | `/settings` | User | Primary 색상 + 채워진 아이콘 |

### 3. EventCard

```
┌─────────────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────────────┐ │
│ │                                                     │ │
│ │              [이미지 슬라이더]                        │ │
│ │                                          ●○○        │ │
│ │                                  응답마감 D-2        │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ NEW  주간 수영 모임                             ☆    🔔 │
│ 📍 올림픽 수영장                                        │
│ 📅 2026.01.25 (토) 14:00                              │
│ 👥 5/10명 참여  |  💰 10,000원                         │
└─────────────────────────────────────────────────────────┘
```

| 요소 | 설명 | 스타일 |
|------|------|--------|
| 이미지 슬라이더 | 이벤트 이미지 (최대 5장) | 16:9 비율, embla-carousel 사용 |
| 응답마감 뱃지 | D-N 형식 또는 "오늘 마감" | 우측 하단, 반투명 배경 |
| NEW 뱃지 | 7일 이내 생성된 이벤트 | 파란색 배경 |
| 제목 | 이벤트 제목 | 1줄 말줄임 처리 |
| 즐겨찾기 | 이벤트 북마크 | ☆ → ★ 토글 |
| 알림 설정 | 해당 이벤트 알림 | 🔕 → 🔔 토글 |
| 장소 | 이벤트 장소 | 📍 아이콘 + 텍스트 |
| 일시 | 이벤트 날짜/시간 | 📅 아이콘 + 포맷된 날짜 |
| 참석 현황 | 참석자 수 / 전체 멤버 수 | 👥 아이콘 + 숫자 |
| 비용 | 참가비 (선택적) | 💰 아이콘 + 금액 |

### 4. ViewToggle

```
┌───────────────────────────────────┐
│  [📋 리스트]  │  [📅 캘린더]      │
│   (활성)      │                   │
└───────────────────────────────────┘
```

| 상태 | 스타일 |
|------|--------|
| 활성 | `bg-blue-500 text-white` |
| 비활성 | `bg-gray-100 text-gray-600` |

### 5. Badge 종류

| 뱃지 | 색상 | 사용 상황 |
|------|------|----------|
| NEW | `bg-blue-500 text-white` | 7일 이내 생성된 이벤트 |
| 마감 D-N | `bg-gray-500 text-white` | 마감 2일 이상 남음 |
| 마감 D-1 | `bg-amber-500 text-white` | 마감 하루 전 |
| 오늘 마감 | `bg-red-500 text-white` | 마감 당일 |
| 마감됨 | `bg-gray-300 text-gray-600` | 마감 완료 |
| 참석 | `bg-emerald-100 text-emerald-700` | 참석 응답 완료 |
| 불참 | `bg-red-100 text-red-700` | 불참 응답 완료 |
| 미정 | `bg-amber-100 text-amber-700` | 미정 응답 완료 |

### 6. AttendanceButtons (참석 응답 버튼)

```
┌─────────────────────────────────────────────────────────┐
│  [ ✓ 참석 ]     [ ✗ 불참 ]     [ ? 미정 ]               │
│   (선택됨)                                              │
└─────────────────────────────────────────────────────────┘
```

| 상태 | 기본 스타일 | 선택된 스타일 |
|------|------------|--------------|
| 참석 | `border-emerald-500` | `bg-emerald-500 text-white` |
| 불참 | `border-red-500` | `bg-red-500 text-white` |
| 미정 | `border-amber-500` | `bg-amber-500 text-white` |

### 7. GroupCard

```
┌─────────────────────────────────────────┐
│                                    👑   │
│ 🏊 수영 동호회                           │
│ 매주 토요일 수영하는 모임                  │
│                                         │
│ 👥 8명  │  📅 다음 이벤트: 1.25(토)       │
└─────────────────────────────────────────┘
```

| 요소 | 설명 |
|------|------|
| 역할 아이콘 | 👑 owner / ⚙️ admin / (없음) member |
| 모임 이름 | 모임 제목 |
| 설명 | 모임 설명 (2줄 말줄임) |
| 멤버 수 | 전체 멤버 수 |
| 다음 이벤트 | 가장 가까운 이벤트 날짜 |

---

## 📱 화면별 상세 와이어프레임

### 대시보드 (모바일)

```
┌─────────────────────────────────────┐
│  🎉 모임이름                  🔍  🔔(2)│
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │        [배너 슬라이더]           │ │
│ │                        ●○○     │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 📅 다가오는 이벤트                    │
│ ┌─────────────────────────────────┐ │
│ │        EventCard 1              │ │
│ │  NEW  주간 수영        D-2  ☆   │ │
│ │  📍 올림픽 수영장                │ │
│ │  📅 1.25(토) 14:00              │ │
│ │  👥 5/10명                      │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │        EventCard 2              │ │
│ │  월말 번개 모임          D-5  ☆ │ │
│ │  📍 강남역 3번 출구              │ │
│ │  📅 1.28(화) 19:00              │ │
│ │  👥 3/10명                      │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 📢 최근 공지                        │
│ ┌─────────────────────────────────┐ │
│ │  1월 회비 안내           12시간전 │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│   🏠     │   👥    │   📅    │  👤   │
│   홈     │  내모임  │ 이벤트  │  MY   │
└─────────────────────────────────────┘
```

### 이벤트 목록 (모바일)

```
┌─────────────────────────────────────┐
│  < 모임이름                   🔍  🔔  │
├─────────────────────────────────────┤
│ ┌───────────────┬─────────────────┐ │
│ │  📋 리스트    │   📅 캘린더     │ │
│ │   (활성)      │                 │ │
│ └───────────────┴─────────────────┘ │
│                                     │
│ 정렬: 최신순 ▼                       │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │        EventCard 1              │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │        EventCard 2              │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │        EventCard 3              │ │
│ └─────────────────────────────────┘ │
│                                     │
│            + 더보기                  │
├─────────────────────────────────────┤
│   🏠     │   👥    │   📅    │  👤   │
│   홈     │  내모임  │ 이벤트  │  MY   │
│          │         │  (활성) │       │
└─────────────────────────────────────┘
```

### 이벤트 상세 (모바일)

```
┌─────────────────────────────────────┐
│  < 이벤트 상세               ⋮ 메뉴  │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │        [이벤트 이미지]           │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ NEW  주간 수영 모임                  │
│                                     │
│ 📍 올림픽 수영장                     │
│ 📅 2026년 1월 25일 (토) 14:00       │
│ ⏰ 응답 마감: 1월 24일까지            │
│ 💰 참가비: 10,000원                  │
│                                     │
│ ───────────────────────────────────│
│                                     │
│ 이번 주 수영 모임입니다.              │
│ 준비물: 수영복, 수경, 수모            │
│                                     │
├─────────────────────────────────────┤
│            참석 응답                 │
│ ┌─────────┬─────────┬─────────┐    │
│ │  ✓ 참석  │  ✗ 불참  │  ? 미정  │    │
│ │ (선택됨) │         │         │    │
│ └─────────┴─────────┴─────────┘    │
├─────────────────────────────────────┤
│ 👥 참석 현황 (5/10명)                │
│ ┌─────────────────────────────────┐ │
│ │ [████████████░░░░░░░░] 50%     │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ✓ 참석 (5명)                        │
│ ┌─────────────────────────────────┐ │
│ │ 😊 홍길동    😊 김철수    +3     │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ✗ 불참 (2명)                        │
│ ┌─────────────────────────────────┐ │
│ │ 😢 이영희    😢 박민수           │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ? 미정 (1명)                        │
│ ┌─────────────────────────────────┐ │
│ │ 🤔 정수진                       │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 📨 미응답 (2명)                      │
│ ┌─────────────────────────────────┐ │
│ │ 최동훈    박지은                 │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│   🏠     │   👥    │   📅    │  👤   │
└─────────────────────────────────────┘
```

### 모임 생성 (모바일)

```
┌─────────────────────────────────────┐
│  < 새 모임 만들기                    │
├─────────────────────────────────────┤
│                                     │
│ 모임 이름 *                          │
│ ┌─────────────────────────────────┐ │
│ │ 수영 동호회                      │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 모임 설명                            │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │ 매주 토요일 함께 수영하는         │ │
│ │ 모임입니다.                      │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 모임 대표 이미지 (선택)               │
│ ┌─────────────────────────────────┐ │
│ │     📷 이미지 업로드              │ │
│ └─────────────────────────────────┘ │
│                                     │
│                                     │
│                                     │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │         ✓ 모임 만들기            │ │
│ └─────────────────────────────────┘ │
│                                     │
├─────────────────────────────────────┤
│   🏠     │   👥    │   📅    │  👤   │
└─────────────────────────────────────┘
```

### 멤버 관리 (모바일)

```
┌─────────────────────────────────────┐
│  < 멤버 관리                  초대하기│
├─────────────────────────────────────┤
│                                     │
│ 🔗 초대 코드: ABC12345        📋복사 │
│                                     │
│ ─────────────────────────────────── │
│                                     │
│ 전체 멤버 (8명)                      │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 😊 홍길동              👑 owner │ │
│ │    2024.01.01 가입              │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 😊 김철수              ⚙️ admin │ │
│ │    2024.01.05 가입        ▼ ✕  │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 😊 이영희                member │ │
│ │    2024.01.10 가입        ▼ ✕  │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 😊 박민수                member │ │
│ │    2024.01.15 가입        ▼ ✕  │ │
│ └─────────────────────────────────┘ │
│                                     │
├─────────────────────────────────────┤
│   🏠     │   👥    │   📅    │  👤   │
└─────────────────────────────────────┘
```

---

## 🔄 인터랙션 패턴

### 1. 참석 응답 플로우

```
[이벤트 상세 진입]
        ↓
[참석/불참/미정 버튼 표시]
        ↓
[버튼 클릭] → 즉시 선택 상태 변경 (Optimistic UI)
        ↓
[서버 반영] → 참석 현황 실시간 업데이트
        ↓
[실패 시] → 이전 상태로 롤백 + 에러 토스트
```

### 2. 초대 코드 공유 플로우

```
[모임 상세 → 초대 코드 섹션]
        ↓
[복사 버튼 클릭] → 클립보드에 초대 링크 복사
        ↓
[성공 토스트] "초대 링크가 복사되었습니다"
        ↓
[공유하기 버튼] → Web Share API 호출 (모바일)
```

### 3. 푸시 알림 권한 요청 플로우

```
[대시보드 첫 진입]
        ↓
[알림 권한 미허용 시] → 권한 요청 배너 표시
        ↓
[알림 허용 클릭] → 브라우저 권한 요청 팝업
        ↓
[허용] → 푸시 구독 등록 → 배너 숨김
[거부] → 배너 숨김 (설정에서 다시 활성화 가능)
```

### 4. Pull-to-Refresh (모바일)

- 대시보드, 이벤트 목록, 모임 목록에서 지원
- 당기면 로딩 인디케이터 표시 후 데이터 새로고침

### 5. 무한 스크롤

- 이벤트 목록, 알림 목록에서 지원
- 스크롤 끝에 도달 시 다음 페이지 자동 로드
- 로딩 중 스켈레톤 UI 표시

---

## 📦 추가 라이브러리

| 라이브러리 | 버전 | 용도 |
|-----------|------|------|
| `embla-carousel-react` | ^8.x | 이미지 슬라이더, 배너 캐러셀 |
| `framer-motion` | ^11.x | 페이지 전환 애니메이션, 마이크로 인터랙션 |
| `date-fns` | ^3.x | 날짜 포맷팅, 상대 시간 표시 |
| `react-hook-form` | ^7.x | 폼 상태 관리 |
| `zod` | ^3.x | 스키마 검증 |

---

## 📅 개발 단계

### Phase 1: 기반 구축

| 순서 | 작업 | 상세 내용 |
|------|------|----------|
| 1-1 | 소셜 로그인 | Supabase 카카오/구글 OAuth 설정, 로그인 UI |
| 1-2 | DB 스키마 | 마이그레이션 작성, RLS 정책 설정 |
| 1-3 | 대시보드 레이아웃 | 반응형 헤더/바텀 네비게이션 구현 |

### Phase 2: 핵심 기능

| 순서 | 작업 | 상세 내용 |
|------|------|----------|
| 2-1 | 모임 관리 | 모임 CRUD, 초대 코드 생성/공유, 멤버 관리 |
| 2-2 | 이벤트 관리 | 이벤트 CRUD, 참석 응답 시스템, 참석자 명단 |
| 2-3 | 공지사항 | 공지 CRUD |

### Phase 3: 알림 및 완성

| 순서 | 작업 | 상세 내용 |
|------|------|----------|
| 3-1 | 웹 푸시 알림 | Service Worker 설정, 푸시 구독/발송 |
| 3-2 | UX 개선 | 로딩 상태, 에러 처리, 빈 상태 UI |

---

## 📁 주요 파일 구조 (수정/생성 대상)

### 수정할 파일
- `app/auth/login/page.tsx` - 소셜 로그인 버튼 추가
- `components/login-form.tsx` - 소셜 로그인 UI
- `lib/supabase/client.ts` - OAuth 함수 추가

### 생성할 파일

```
app/
├── api/
│   ├── auth/callback/route.ts     # OAuth 콜백
│   └── push/
│       ├── subscribe/route.ts     # 푸시 구독
│       └── send/route.ts          # 푸시 발송
├── (dashboard)/
│   ├── layout.tsx                 # 대시보드 레이아웃
│   ├── dashboard/page.tsx         # 대시보드 홈
│   ├── groups/
│   │   ├── page.tsx               # 모임 목록
│   │   ├── new/page.tsx           # 모임 생성
│   │   └── [groupId]/
│   │       ├── page.tsx           # 모임 상세
│   │       ├── members/page.tsx   # 멤버 관리
│   │       └── events/
│   │           ├── new/page.tsx   # 이벤트 생성
│   │           └── [eventId]/page.tsx  # 이벤트 상세
│   ├── events/page.tsx            # 내 이벤트 전체
│   ├── notifications/page.tsx     # 알림
│   └── settings/page.tsx          # 설정
├── (public)/
│   └── invite/[code]/page.tsx     # 초대 링크

app/actions/
├── groups.ts                      # 모임 관련 Server Actions
├── events.ts                      # 이벤트 관련 Server Actions
├── participants.ts                # 참석 응답 Server Actions
├── announcements.ts               # 공지사항 Server Actions
└── notifications.ts               # 알림 관련 Server Actions

lib/queries/
├── groups.ts                      # 모임 데이터 페칭
├── events.ts                      # 이벤트 데이터 페칭
├── participants.ts                # 참석자 데이터 페칭
└── announcements.ts               # 공지사항 데이터 페칭

components/
├── dashboard/
│   ├── header.tsx                 # 데스크톱 헤더
│   ├── bottom-nav.tsx             # 모바일 하단 네비게이션
│   └── banner-carousel.tsx        # 배너 슬라이더
├── groups/
│   ├── group-card.tsx             # 모임 카드
│   ├── group-form.tsx             # 모임 생성/수정 폼
│   └── invite-code-share.tsx      # 초대 코드 공유
├── events/
│   ├── event-card.tsx             # 이벤트 카드
│   ├── event-form.tsx             # 이벤트 생성/수정 폼
│   ├── attendance-buttons.tsx     # 참석 응답 버튼
│   ├── participants-list.tsx      # 참석자 명단
│   └── view-toggle.tsx            # 리스트/캘린더 토글
└── announcements/
    ├── announcement-card.tsx      # 공지사항 카드
    └── announcement-form.tsx      # 공지사항 폼

supabase/migrations/
├── 001_create_profiles.sql
├── 002_create_groups.sql
├── 003_create_group_members.sql
├── 004_create_events.sql
├── 005_create_participants.sql
├── 006_create_announcements.sql
├── 007_create_push_subscriptions.sql
└── 008_create_notification_logs.sql

public/
└── sw.js                          # Service Worker (푸시 알림)
```

---

## 🔒 보안 및 권한 정책

### RLS (Row Level Security) 정책 요약

| 테이블 | SELECT | INSERT | UPDATE | DELETE |
|--------|--------|--------|--------|--------|
| profiles | 본인만 | 본인만 | 본인만 | - |
| groups | 멤버만 | 인증 사용자 | owner만 | owner만 |
| group_members | 같은 그룹 멤버 | owner/admin | owner/admin | owner/admin |
| events | 그룹 멤버만 | admin 이상 | admin 이상 | admin 이상 |
| participants | 그룹 멤버만 | 본인만 | 본인만 | 본인만 |
| announcements | 그룹 멤버만 | admin 이상 | 작성자/admin | 작성자/admin |
| push_subscriptions | 본인만 | 본인만 | 본인만 | 본인만 |
| notification_logs | 본인만 | 시스템만 | 본인 (read_at만) | - |

---

## 🧪 검증 방법

### 1. 소셜 로그인 테스트
- [ ] 카카오 로그인 후 대시보드 이동 확인
- [ ] 구글 로그인 후 대시보드 이동 확인
- [ ] 프로필 자동 생성 확인

### 2. 모임 플로우 테스트
- [ ] 모임 생성 → 초대 코드 확인
- [ ] 초대 링크 공유 → 다른 계정으로 가입
- [ ] 멤버 역할 변경 확인

### 3. 이벤트 플로우 테스트
- [ ] 이벤트 생성 → 목록에 표시 확인
- [ ] 참석 응답 → 실시간 업데이트 확인
- [ ] 참석자 명단 정확성 확인

### 4. 푸시 알림 테스트
- [ ] 알림 구독 → 구독 정보 저장 확인
- [ ] 이벤트 생성 시 멤버에게 알림 발송
- [ ] 리마인더 알림 수신 확인

---

## 🚀 향후 확장 (MVP 이후)

| 기능 | 설명 | 우선순위 |
|------|------|---------|
| 정산 기능 | 회비 계산, 더치페이 | 높음 |
| 카풀 매칭 | 차량 등록, 탑승자 매칭 | 중간 |
| 채팅 기능 | Supabase Realtime 활용 | 중간 |
| 캘린더 연동 | Google Calendar, iCal | 낮음 |
| 사진 앨범 | 이벤트별 사진 공유 | 낮음 |
